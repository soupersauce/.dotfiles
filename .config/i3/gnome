# License: MIT
# i3 config file (v4)
# exec --no-startup-id xrandr --output eDP-1 --primary
# font for window titles and bar
set $notifier dunst -conf ~/.config/dunst/dunstrc
set $font pango:Fira Code Nerd Font, Retina 10
font $font
set $statuscmd i3status-rs

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
# exec --no-startup-id /usr/lib/gsd-xsettings
# exec_always --no-startup-id gnome-power-manager
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

include ~/.config/wm/windows
# use win key= Mod4
# TODO: alt key?
set $mod Mod4

# use these keys for focus, movement, and resize directions
set $left   h
set $down   j
set $up     k
set $right  l

set $term kitty
# Your preferred application launcher
# Note: pass the final command to swaymsg so that the resulting window can be opened
# on the original workspace that the command was run on.
set $menu --no-startup-id "~/.config/rofi/scripts/launcher_t1"

exec --no-startup-id feh --bg-scale ~/Pictures/System76-Chainlink-by_Kate_Hazen_of_System76.png
exec_always --no-startup-id picom --experimental-backends

include ~/.config/wm/maps/core
# control focused window when follows the mouse movements
focus_follows_mouse no

# window border settings
default_border          none
default_floating_border none

# hiding borders adjacent to the screen edges
hide_edge_borders none

# set popups during fullscreen mode
popup_during_fullscreen smart

include ~/.config/wm/focus/overfocus
# Workspaces:
#
# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# change container layout
bindsym $mod+s layout stacking
bindsym $mod+w exec ~/.cargo/bin/i3-autolayout tabmode
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

#
# Resizing containers:
#
include "modes/resize"

bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86Search exec $menu

# move focused floating window to the center of all outputs
# bindsym $mod+Shift+h move absolute position center

# move focused floating window to the current position of the cursor
bindsym $mod+Shift+m move position mouse

# set a window to stick to the glass
bindsym $mod+Shift+s sticky toggle

# sticky preview for media
bindsym $mod+Shift+p fullscreen disable; floating enable; resize set 350 px 197 px; sticky enable; move window to position 1006 px 537 px

# shortcut to change window border
# bindsym _always $mod+t border normal    0
# bindsym $mod+y border pixel     1
# bindsym $mod+u border none

# shortcut applications
bindsym Print                   exec --no-startup-id scrot
bindsym $mod+Print              exec --no-startup-id scrot -s
bindsym $mod+Shift+x            exec --no-startup-id i3lock-fancy -f Source-Sans-Pro

# notification
# bindsym Ctrl+space              exec --no-startup-id dunstctl close
bindsym Ctrl+Shift+space        exec --no-startup-id dunstctl close-all
bindsym Ctrl+grave              exec --no-startup-id dunstctl history-pop
bindsym Ctrl+Shift+period       exec --no-startup-id dunstctl context

# manage i3 session
bindsym $mod+Shift+e exec --no-startup-id i3-nagbar -t warning -f "pango:Fira Code Nerd Font: Regular 10" -m "Do you really want to exit?" -B "  ï‚‹  Exit " "i3-msg exit"
# bindsym $mod+Shift+e exec -no-startup-id qdbus-qt5 org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.logout -1 -1 -1

# set specific windows to floating mode
for_window [window_role="app"]                      floating enable
for_window [window_role="pop-up"]                   floating enable
for_window [window_role="task_dialog"]              floating enable
for_window [title="Preferences$"]                   floating enable
for_window [title="(?i)settings"]                   floating enable

for_window [class="firefox"] layout tabbed

# start i3bar to display a workspace bar
include ~/.config/wm/bar
include ~/.config/wm/colors

# i3-gaps
# smart_gaps on
# gaps inner 8
# gaps outer 2

# local config file
# include local.conf

# startup applications
exec --no-startup-id ~/.cargo/bin/sworkstyle -d -l debug &> /tmp/sworkstyle.log
exec --no-startup-id dbus-launch $notifier
exec --no-startup-id ~/.cargo/bin/i3-autolayout autolayout
exec_always --no-startup-id dbus-launch nm-applet
# exec_always --no-startup-id pulseaudio --start
# exec_always --no-startup-id lxpolkit
# exec_always --no-startup-id feh --bg-fill ~/Public/desktop/dark_planet_minimalist.png
# exec_always --no-startup-id picom
# Review the lines below and append to ~/.config/i3/config

## Volume control

# Path to volume control, without trailing slash
set $volumepath ~/.i3-volume

# Command for the status line
#   ie: i3blocks, i3status

# Signal used to update the status line
#   i3blocks uses SIGRTMIN+10 by default
#   i3status uses SIGUSR1 by default
#   i3status-rs uses SIGRTMIN+10 by default
set $statussig SIGRTMIN+10

# Amount to increase/decrease volume as a percentage
set $volumestep 2

bindsym XF86AudioRaiseVolume exec --no-startup-id $volumepath/volume -n -t $statuscmd -u $statussig up $volumestep
bindsym XF86AudioLowerVolume exec --no-startup-id $volumepath/volume -n -t $statuscmd -u $statussig down $volumestep
bindsym XF86AudioMute        exec --no-startup-id $volumepath/volume -n -t $statuscmd -u $statussig mute
# vim: ft=i3config
